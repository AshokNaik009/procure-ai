<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Procurement Intelligence System</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
    <div class="dashboard-layout">
        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" onclick="toggleMobileSidebar()">‚ò∞</button>
        
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-toggle" onclick="toggleSidebar()">
                <span id="sidebar-toggle-icon">‚Üê</span>
            </div>
            
            <div class="sidebar-header">
                <div class="sidebar-logo">ü§ñ</div>
                <div>
                    <div class="sidebar-title">ProcureAI</div>
                    <div style="font-size: 12px; color: var(--text-muted);">v2.0</div>
                </div>
            </div>
            
            <div class="sidebar-nav">
                <div class="nav-item active" onclick="switchPage('dashboard', event)">
                    <div class="nav-icon">üìä</div>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="switchPage('supplier-discovery', event)">
                    <div class="nav-icon">üîç</div>
                    <span>Supplier Discovery</span>
                </div>
                <div class="nav-item" onclick="switchPage('competitive-intelligence', event)">
                    <div class="nav-icon">üìà</div>
                    <span>Market Intelligence</span>
                </div>
                <div class="nav-item" onclick="switchPage('analytics', event)">
                    <div class="nav-icon">üìä</div>
                    <span>Analytics</span>
                </div>
                <div class="nav-item" onclick="switchPage('about', event)">
                    <div class="nav-icon">‚ÑπÔ∏è</div>
                    <span>About</span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <nav class="breadcrumb">
                    <span class="breadcrumb-item">ProcureAI</span>
                    <span>></span>
                    <span class="breadcrumb-item active" id="current-page">Dashboard</span>
                </nav>
                <h1 class="page-title" id="page-title">Procurement Intelligence Dashboard</h1>
                <p class="page-subtitle" id="page-subtitle">AI-powered supplier discovery and competitive analysis</p>
            </header>

            <div class="content-body">
                <!-- Dashboard Page -->
                <div id="dashboard-page" class="page-content active">
                    <!-- Popular Categories Section -->
                    <section class="popular-categories">
                        <div class="categories-header">
                            <h2 class="categories-title">Popular Procurement Categories</h2>
                            <button class="btn-secondary" onclick="switchPage('supplier-discovery', event)">
                                Start Custom Search ‚Üí
                            </button>
                        </div>
                        
                        <div class="categories-grid">
                            <div class="category-card" onclick="searchCategory('Raw Materials')">
                                <div class="category-icon">üèóÔ∏è</div>
                                <div class="category-name">Raw Materials</div>
                                <div class="category-description">Essential materials for manufacturing and production processes</div>
                                <div class="category-examples">
                                    <span class="category-tag">Steel</span>
                                    <span class="category-tag">Aluminum</span>
                                    <span class="category-tag">Plastics</span>
                                </div>
                            </div>
                            
                            <div class="category-card" onclick="searchCategory('Industrial Equipment')">
                                <div class="category-icon">‚öôÔ∏è</div>
                                <div class="category-name">Industrial Equipment</div>
                                <div class="category-description">Machinery and equipment for industrial operations</div>
                                <div class="category-examples">
                                    <span class="category-tag">CNC Machines</span>
                                    <span class="category-tag">Pumps</span>
                                    <span class="category-tag">Motors</span>
                                </div>
                            </div>
                            
                            <div class="category-card" onclick="searchCategory('IT Services')">
                                <div class="category-icon">üíª</div>
                                <div class="category-name">IT Services</div>
                                <div class="category-description">Technology services and software solutions</div>
                                <div class="category-examples">
                                    <span class="category-tag">Cloud Services</span>
                                    <span class="category-tag">Software Dev</span>
                                    <span class="category-tag">IT Support</span>
                                </div>
                            </div>
                            
                            <div class="category-card" onclick="searchCategory('Construction Materials')">
                                <div class="category-icon">üè¢</div>
                                <div class="category-name">Construction Materials</div>
                                <div class="category-description">Building materials and construction supplies</div>
                                <div class="category-examples">
                                    <span class="category-tag">Concrete</span>
                                    <span class="category-tag">Lumber</span>
                                    <span class="category-tag">Electrical</span>
                                </div>
                            </div>
                            
                            <div class="category-card" onclick="searchCategory('Logistics Services')">
                                <div class="category-icon">üöö</div>
                                <div class="category-name">Logistics Services</div>
                                <div class="category-description">Transportation and supply chain management</div>
                                <div class="category-examples">
                                    <span class="category-tag">Freight</span>
                                    <span class="category-tag">Warehousing</span>
                                    <span class="category-tag">Distribution</span>
                                </div>
                            </div>
                            
                            <div class="category-card" onclick="searchCategory('Professional Services')">
                                <div class="category-icon">üëî</div>
                                <div class="category-name">Professional Services</div>
                                <div class="category-description">Consulting and professional expertise</div>
                                <div class="category-examples">
                                    <span class="category-tag">Legal</span>
                                    <span class="category-tag">Consulting</span>
                                    <span class="category-tag">Accounting</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Quick Search Section -->
                    <section class="search-section">
                        <div class="search-header">
                            <h2 class="search-title">Quick Supplier Search</h2>
                            <p class="search-subtitle">Find suppliers and get market intelligence in seconds</p>
                        </div>
                        
                        <form class="search-form" id="quickSearchForm">
                            <div class="form-group">
                                <input 
                                    type="text" 
                                    id="quick-search" 
                                    class="form-input" 
                                    placeholder="What are you looking to procure? (e.g., industrial steel, IT services)" 
                                    required
                                >
                            </div>
                            <button type="submit" class="btn-primary">
                                üîç Search Suppliers
                            </button>
                        </form>
                    </section>
                </div>

                <!-- Supplier Discovery Page -->
                <div id="supplier-discovery-page" class="page-content">
                    <div class="search-section">
                        <div class="search-header">
                            <h2 class="search-title">Advanced Supplier Discovery</h2>
                            <p class="search-subtitle">AI-powered supplier search with comprehensive market analysis</p>
                        </div>
                        
                        <form class="search-form" id="procurementForm">
                            <div class="form-group">
                                <label for="query" class="form-label">Product or Service</label>
                                <input 
                                    type="text" 
                                    id="query" 
                                    class="form-input" 
                                    placeholder="Describe what you need to procure..." 
                                    required
                                >
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-lg);">
                                <div class="form-group">
                                    <label for="location" class="form-label">Location (Optional)</label>
                                    <input 
                                        type="text" 
                                        id="location" 
                                        class="form-input" 
                                        placeholder="e.g., Dubai, California, Europe"
                                    >
                                </div>
                                
                                <div class="form-group">
                                    <label for="category" class="form-label">Category</label>
                                    <select id="category" class="form-input">
                                        <option value="">Select category...</option>
                                        <option value="raw-materials">Raw Materials</option>
                                        <option value="industrial-equipment">Industrial Equipment</option>
                                        <option value="it-services">IT Services</option>
                                        <option value="construction">Construction</option>
                                        <option value="logistics">Logistics</option>
                                        <option value="professional-services">Professional Services</option>
                                    </select>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn-primary">
                                üöÄ Start AI Analysis
                            </button>
                        </form>
                    </div>

                    <!-- Workflow Status -->
                    <div id="workflowStatus" class="workflow-status">
                        <h3 style="color: #1a202c; margin-bottom: var(--space-md);">ü§ñ AI Agent Workflow</h3>
                        <div id="step1" class="workflow-step">Step 1: Search Suppliers</div>
                        <div id="step2" class="workflow-step">Step 2: Analyze Suppliers</div>
                        <div id="step3" class="workflow-step">Step 3: Generate Market Insights</div>
                        <div id="step4" class="workflow-step">Step 4: Create Summary</div>
                    </div>

                    <!-- Loading -->
                    <div id="loading" class="loading">
                        <div class="spinner"></div>
                        <p>AI agents are analyzing the market...</p>
                    </div>

                    <!-- Results -->
                    <div id="results" class="results">
                        <div class="card">
                            <div id="summary" class="summary"></div>
                            
                            <h3 style="color: var(--text-primary) !important; margin-bottom: var(--space-lg);">üè¢ Recommended Suppliers</h3>
                            <div id="suppliersGrid" class="suppliers-grid"></div>
                            
                            <div class="market-insights">
                                <h3 style="color: var(--text-primary) !important; margin-bottom: var(--space-lg);">üìä Market Insights</h3>
                                
                                <div class="insight-section">
                                    <h4 class="insight-title">Price Trend</h4>
                                    <div id="priceTrend"></div>
                                </div>
                                
                                <div class="insight-section">
                                    <h4 class="insight-title">Key Market Factors</h4>
                                    <ul id="keyFactors" class="insight-list"></ul>
                                </div>
                                
                                <div class="insight-section">
                                    <h4 class="insight-title">Recommendations</h4>
                                    <ul id="recommendations" class="insight-list"></ul>
                                </div>
                            </div>
                            
                            <!-- Clear/Refresh Button for Supplier Discovery -->
                            <div class="action-buttons" style="margin-top: var(--space-xl); text-align: center;">
                                <button onclick="clearSupplierResults()" class="btn-secondary">
                                    üîÑ Search Again
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Competitive Intelligence Page -->
                <div id="competitive-intelligence-page" class="page-content">
                    <div class="search-section">
                        <div class="search-header">
                            <h2 class="search-title">Competitive Market Intelligence</h2>
                            <p class="search-subtitle">Advanced market positioning and benchmarking analysis</p>
                        </div>
                        
                        <form class="search-form" id="competitiveForm">
                            <div class="form-group">
                                <label for="product" class="form-label">Product/Service</label>
                                <input 
                                    type="text" 
                                    name="product" 
                                    class="form-input" 
                                    placeholder="What product/service do you want to benchmark?" 
                                    required
                                >
                            </div>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: var(--space-lg);">
                                <div class="form-group">
                                    <label for="supplier_quote" class="form-label">Current Quote ($)</label>
                                    <input 
                                        type="number" 
                                        name="supplier_quote" 
                                        class="form-input" 
                                        placeholder="e.g., 50000"
                                    >
                                </div>
                                
                                <div class="form-group">
                                    <label for="quantity" class="form-label">Quantity</label>
                                    <input 
                                        type="number" 
                                        name="quantity" 
                                        class="form-input" 
                                        placeholder="e.g., 100"
                                    >
                                </div>
                                
                                <div class="form-group">
                                    <label for="location" class="form-label">Location</label>
                                    <input 
                                        type="text" 
                                        name="location" 
                                        class="form-input" 
                                        placeholder="e.g., Dubai, UAE"
                                    >
                                </div>
                            </div>
                            
                            <button type="submit" class="btn-primary">
                                üìà Analyze Market Position
                            </button>
                        </form>
                    </div>

                    <!-- Competitive Loading -->
                    <div id="competitive-loading" class="loading">
                        <div class="spinner"></div>
                        <p>Analyzing competitive landscape...</p>
                    </div>

                    <!-- Competitive Results -->
                    <div id="competitive-results" class="results">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-xl);">
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">üìä Market Position</h3>
                                </div>
                                <div id="market-position-content"></div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">üí¨ Negotiation Strategy</h3>
                                </div>
                                <div id="negotiation-strategy-content"></div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">üè¢ Competitive Landscape</h3>
                                </div>
                                <div id="competitive-landscape-content"></div>
                            </div>
                        </div>
                        
                        <!-- Clear/Refresh Button for Market Intelligence -->
                        <div class="action-buttons" style="margin-top: var(--space-xl); text-align: center;">
                            <button onclick="clearCompetitiveResults()" class="btn-secondary" style="margin-right: var(--space-md);">
                                üîÑ Analyze Another Product
                            </button>
                            <button onclick="exportCompetitiveResults()" class="btn-outline">
                                üìä Export Analysis
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Analytics Page -->
                <div id="analytics-page" class="page-content">
                    <div class="search-section">
                        <div class="search-header">
                            <h2 class="search-title">Analytics & Reporting</h2>
                            <p class="search-subtitle">Advanced procurement analytics and insights</p>
                        </div>
                        
                        <div class="card">
                            <h3>üìä Coming Soon</h3>
                            <p>Advanced analytics and reporting features are currently in development.</p>
                        </div>
                    </div>
                </div>

                <!-- About Page -->
                <div id="about-page" class="page-content">
                    <div class="search-section">
                        <div class="search-header">
                            <h2 class="search-title">About ProcureAI</h2>
                            <p class="search-subtitle">Why ProcureAI is better than manual Google searches</p>
                        </div>
                        
                        <div class="card">
                            <h3>üöÄ AI-Powered Intelligence</h3>
                            <p>Unlike manual searches, ProcureAI uses advanced AI agents to automatically discover, verify, and analyze suppliers with market intelligence in seconds.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html>